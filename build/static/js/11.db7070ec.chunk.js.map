{"version":3,"sources":["context/material.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/bookshell/bookshell.js","hooks/use-materail.js","services/postServices.js"],"names":["MaterialContext","createContext","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","PursMaterial","lazy","MyMaterial","Bookshell","user","pageNumber","useState","loading","setLoading","error","setError","material","setMaterial","purcMaterial","setPurcMaterial","hasMore","setMore","useEffect","getMaterial","a","getUserMaterialByUsername","username","prevPost","result","getUserPurcMaterialByUserId","_id","purcmaterial","length","console","log","useMaterial","useContext","LoggedInUserContext","Provider","value","className","exact","activeClassName","to","fallback","ROUTES","path","component","apiEndpoint","apiUrl","postByUsername","files","title","caption","paid","price","progress","axios","post","data","Error","response","logginUserId","limit","get","params","page","getMaterialByTitle","buyMaterialById","materialId","userId","author","addReview","message","getReviewByMaterialId","checkPurchased"],"mappings":"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","file":"static/js/11.db7070ec.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nconst MaterialContext = createContext(null);\r\nexport default MaterialContext;\r\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { lazy, useContext, Suspense } from 'react'\r\nimport { Route, Switch, Link, NavLink } from 'react-router-dom';\r\nimport { Redirect, useLocation } from 'react-router'\r\nimport * as ROUTES from '../../constants/routes';\r\nimport LoggedInUserContext from '../../context/logged-in-user';\r\nimport MaterialContext from '../../context/material';\r\nimport useMaterial from '../../hooks/use-materail';\r\nimport ReactLoader from '../loader';\r\n\r\nconst PursMaterial = lazy(() => import('./pursMaterial'));\r\nconst MyMaterial = lazy(() => import('./myMaterial'));\r\n\r\nexport default function Bookshell() {\r\n    const { user } = useContext(LoggedInUserContext)\r\n    const { material, purcMaterial, loading } = useMaterial(user)\r\n\r\n    return (\r\n        <MaterialContext.Provider value={{ MyMaterial: material, PursMaterial: purcMaterial, loading }}>\r\n            <div>\r\n                <div className=\"bookshell__head\">\r\n                    <NavLink className=\"bookshell__title\" exact activeClassName=\"bookshell__head-active\" to={`/bookshell/mymaterial`} aria-label=\"Profile\">\r\n                        My Material\r\n                    </NavLink>\r\n                    <NavLink className=\"bookshell__tittle\" activeClassName=\"bookshell__head-active\" to={`/bookshell/pursmaterial`} aria-label=\"Profile\">\r\n                        Purchased Material\r\n                    </NavLink>\r\n                </div>\r\n                <Suspense fallback={<ReactLoader />}>\r\n                    <Switch>\r\n                        <Redirect exact from={ROUTES.BOOKSHELL} to={ROUTES.MYMATERIAL} />\r\n                        <Route path={ROUTES.PURSMATERIAL} component={PursMaterial} />\r\n                        <Route path={ROUTES.MYMATERIAL} component={MyMaterial} />\r\n                    </Switch>\r\n                </Suspense>\r\n            </div>\r\n        </MaterialContext.Provider>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { getPost, getUserMaterialByUsername, getUserPurcMaterialByUserId } from '../services/postServices';\r\n\r\nexport default function useMaterial(user, pageNumber) {\r\n    const [loading, setLoading] = useState(true)\r\n    const [error, setError] = useState(false)\r\n    const [material, setMaterial] = useState([]);\r\n    const [purcMaterial, setPurcMaterial] = useState([]);\r\n    const [hasMore, setMore] = useState(false)\r\n\r\n    useEffect(async () => {\r\n        setLoading(true)\r\n        setError(false)\r\n        async function getMaterial() {\r\n            try {\r\n                const material = await getUserMaterialByUsername(user.username, 1, 10);\r\n                setMaterial(prevPost => { return [...prevPost, ...material.result] });\r\n                const purcmaterial = await getUserPurcMaterialByUserId(user._id);\r\n                setPurcMaterial(prevPost => { return [...prevPost, ...purcmaterial] });\r\n                setMore(material.result.length > 0)\r\n                setLoading(false)\r\n            } catch (error) {\r\n                setError(true)\r\n                console.log(error);\r\n            }\r\n\r\n        }\r\n\r\n        // async function getPurcMaterial() {\r\n        //     try {\r\n        //         const purcmaterial = await getUserPurcMaterialByUserId(user._id);\r\n        //         console.log(purcmaterial);\r\n        //         setPurcMaterial(prevPost => { return [...prevPost, ...purcmaterial] });\r\n        //         setLoading(false)\r\n        //     } catch (error) {\r\n        //         setError(true)\r\n        //         console.log(error);\r\n        //     }\r\n\r\n        // }\r\n\r\n        getMaterial();\r\n        // getPurcMaterial();\r\n    }, [user?._id, pageNumber]);\r\n\r\n    return { material, purcMaterial, loading, error, hasMore, setMaterial, setPurcMaterial };\r\n}\r\n","import axios from 'axios';\r\nimport { apiUrl } from \"../config.json\";\r\n\r\nconst apiEndpoint = apiUrl + \"/post\";\r\n\r\nexport const postByUsername = async (files, title, caption, username, paid, price, progress) => {\r\n    try {\r\n        const { data } = await axios.post(`${apiEndpoint}/add-material/${username}`,\r\n            { files, title, caption, paid, price }, progress);\r\n        return { data };\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const retrivePostByUsername = async (username) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/${username}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const getUserMaterialByUsername = async (username, logginUserId, pageNumber, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/user-material/${username}`,\r\n            {\r\n                params: { page: pageNumber, limit: limit, logginUserId: logginUserId }\r\n            });\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\nexport const getMaterialByTitle = async (title) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/title/${title}`\r\n        );\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const buyMaterialById = async (materialId, userId, username, author) => {\r\n    try {\r\n        const response = await axios.post(`${apiEndpoint}/buy-material/${materialId}`,\r\n            {\r\n                username, author, userId\r\n            })\r\n        return response.data\r\n    } catch (error) {\r\n        return error;\r\n    }\r\n}\r\n\r\nexport const getUserPurcMaterialByUserId = async (userId) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/get-purc-material/${userId}`)\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\n\r\nexport const getUserPhotosByUsername = async (username, logginUserId, pageNumber, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/user-posts/${username}`,\r\n            {\r\n                params: { page: pageNumber, limit: limit, logginUserId: logginUserId }\r\n            });\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\n\r\nexport const addReview = async (message, userId, materialId) => {\r\n    try {\r\n        const response = await axios.post(`${apiEndpoint}/add-review/${materialId}`,\r\n            { message, userId }\r\n        );\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const getReviewByMaterialId = async (materialId) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/get-review/${materialId}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const checkPurchased = async (userId, materialId) => {\r\n    try {\r\n        const response = await axios.post(`${apiEndpoint}/check-purchased`, {\r\n            userId, materialId\r\n        });\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const getPost = async (userId, page, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/all-posts/${userId}`, {\r\n            params: { page: page, limit: limit }\r\n        });\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const deletePostById = async (postId) => {\r\n    try {\r\n        const response = await axios.delete(`${apiEndpoint}/delete/${postId}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        return err.response.data.error;\r\n    }\r\n};"],"sourceRoot":""}