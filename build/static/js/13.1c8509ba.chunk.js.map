{"version":3,"sources":["components/leftbar/material.js","services/postServices.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["Material","loggedInUser","useContext","LoggedInUserContext","user","title","useParams","useState","material","setMaterial","reviews","setReviews","message","setMessage","show","setShow","history","useHistory","useEffect","a","getMaterialByTitle","console","log","_id","getReviewByMaterialId","prevreview","push","ROUTES","checkMaterialExists","handleBuy","buyMaterialById","username","author","data","response","reviewSubmit","addReview","className","paid","price","onClick","caption","type","placeholder","onChange","e","target","value","map","review","date","apiEndpoint","apiUrl","postByUsername","files","progress","axios","post","Error","error","getUserMaterialByUsername","logginUserId","pageNumber","limit","get","params","page","materialId","userId","getUserPurcMaterialByUserId","getUserPhotosByUsername","getPost","deletePostById","postId","delete","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError"],"mappings":"6PAOe,SAASA,IACpB,IAAcC,EAAiBC,qBAAWC,KAAlCC,KACAC,EAAUC,cAAVD,MACR,EAAgCE,qBAAhC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA8BJ,mBAAS,IAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAAwBN,oBAAS,GAAjC,mBAAOO,EAAP,KAAaC,EAAb,KACMC,EAAUC,cAEhBC,qBAAU,WAAM,4CAEZ,8BAAAC,EAAA,sEAC2BC,YAAmBf,GAD9C,cACUG,EADV,OAEIa,QAAQC,IAAR,OAAYd,QAAZ,IAAYA,OAAZ,EAAYA,EAAUe,KAF1B,SAG0BC,YAAqB,OAAChB,QAAD,IAACA,OAAD,EAACA,EAAUe,KAH1D,OAGUb,EAHV,OAIIW,QAAQC,IAAIZ,IACZ,OAAIF,QAAJ,IAAIA,OAAJ,EAAIA,EAAUe,MACVd,EAAY,eAAKD,IACjBG,GAAW,SAAAc,GAAU,4BAAQA,GAAR,YAAuBf,QAG5CM,EAAQU,KAAKC,KAVrB,4CAFY,uBAAC,WAAD,wBAeZC,KACD,CAACvB,EAAOW,IAEX,IAAMa,EAAS,uCAAG,4BAAAV,EAAA,+EAEaW,YAAgBtB,EAASe,IAAKtB,EAAasB,IAAKtB,EAAa8B,SAAUvB,EAASwB,QAF7F,kBAEFC,KACRjB,EAAQU,KAAKC,KAHH,gDAKVN,QAAQC,IAAI,KAAMY,UALR,yDAAH,qDAiBTC,EAAY,uCAAG,4BAAAhB,EAAA,+EAEMiB,YAAUxB,EAASX,EAAasB,IAAKf,EAASe,KAFpD,OAEPU,EAFO,OAGbZ,QAAQC,IAAIW,GACZtB,GAAW,SAAAc,GAAU,4BAAQA,GAAR,CAAoBQ,OACzCpB,EAAW,IACXE,GAAQ,GANK,kDASbM,QAAQC,IAAI,KAAMY,UATL,0DAAH,qDAalB,OADAb,QAAQC,IAAIZ,GAER,8BACKF,GAAY,sBAAK6B,UAAU,WAAf,UACT,sBAAKA,UAAU,iBAAf,UACI,sBAAKA,UAAU,kBAAf,UACI,oBAAIA,UAAU,kBAAd,SAAiC7B,EAASH,QAC1C,qBAAIgC,UAAU,mBAAd,gBAAoC,+BAAO7B,EAASwB,eAExD,sBAAKK,UAAU,sBAAf,UACI,qBAAIA,UAAU,gBAAd,oBAAiC7B,EAAS8B,KAAKC,SAC/C,wBAAQF,UAAU,gBAAgBG,QAASX,EAA3C,uBAGR,oBAAGQ,UAAU,wBAAb,UACI,oBAAIA,UAAU,gBAAd,wBACC7B,EAASiC,WAEd,oBAAGJ,UAAU,mBAAb,UACI,sBAAKA,UAAU,wBAAf,UACI,oBAAIA,UAAU,gBAAd,qBACA,sBAAKA,UAAU,wBAAf,UACI,wBAAQA,UAAU,gBAAgBG,QA1CvC,WACfzB,GAASD,IAyCW,+BACCA,GAAQ,qCAAE,uBAAO4B,KAAK,OAAOC,YAAY,SAASN,UAAU,qBAAqBO,SAvCrF,SAACC,GAClBhC,EAAWgC,EAAEC,OAAOC,UAuCI,wBAAQV,UAAU,gBAAgBG,QAASL,EAA3C,6BAIXzB,GAAW,8BACPA,EAAQsC,KAAI,SAAAC,GACT,OACI,mCACI,sBAAKZ,UAAU,wBAAf,UACI,4BAAIY,EAAOrC,UACX,+BAAOqC,EAAOC,2B,yaC9FhDC,EAAcC,IAAS,QAEhBC,EAAc,uCAAG,WAAOC,EAAOjD,EAAOoC,EAASV,EAAUO,EAAMC,EAAOgB,GAArD,iBAAApC,EAAA,+EAECqC,IAAMC,KAAN,UAAcN,EAAd,YAA6BpB,GAChD,CAAEuB,QAAOjD,QAAOoC,UAASH,OAAMC,SAASgB,GAHtB,uBAEdtB,EAFc,EAEdA,KAFc,kBAIf,CAAEA,SAJa,sCAMhB,IAAIyB,MAAM,KAAIxB,SAASD,KAAK0B,OANZ,yDAAH,kEAmBdC,EAAyB,uCAAG,WAAO7B,EAAU8B,EAAcC,EAAYC,GAA3C,eAAA5C,EAAA,+EAEVqC,IAAMQ,IAAN,UAAab,EAAb,0BAA0CpB,GAC7D,CACIkC,OAAQ,CAAEC,KAAMJ,EAAYC,MAAOA,EAAOF,aAAcA,KAJ/B,cAE3B3B,EAF2B,yBAM1BA,EAASD,MANiB,wHAAH,4DAWzBb,EAAkB,uCAAG,WAAOf,GAAP,eAAAc,EAAA,+EAEHqC,IAAMQ,IAAN,UAAab,EAAb,kBAAkC9C,IAF/B,cAEpB6B,EAFoB,yBAInBA,EAASD,MAJU,wHAAH,sDAUlBH,EAAe,uCAAG,WAAOqC,EAAYC,EAAQrC,EAAUC,GAArC,eAAAb,EAAA,+EAEAqC,IAAMC,KAAN,UAAcN,EAAd,yBAA0CgB,GAC7D,CACIpC,WAAUC,SAAQoC,WAJH,cAEjBlC,EAFiB,yBAMhBA,EAASD,MANO,wHAAH,4DAYfoC,EAA2B,uCAAG,WAAOD,GAAP,eAAAjD,EAAA,+EAEZqC,IAAMQ,IAAN,UAAab,EAAb,8BAA8CiB,IAFlC,cAE7BlC,EAF6B,yBAG5BA,EAASD,MAHmB,wHAAH,sDAS3BqC,EAAuB,uCAAG,WAAOvC,EAAU8B,EAAcC,EAAYC,GAA3C,eAAA5C,EAAA,+EAERqC,IAAMQ,IAAN,UAAab,EAAb,uBAAuCpB,GAC1D,CACIkC,OAAQ,CAAEC,KAAMJ,EAAYC,MAAOA,EAAOF,aAAcA,KAJjC,cAEzB3B,EAFyB,yBAMxBA,EAASD,MANe,wHAAH,4DAYvBG,EAAS,uCAAG,WAAOxB,EAASwD,EAAQD,GAAxB,eAAAhD,EAAA,+EAEMqC,IAAMC,KAAN,UAAcN,EAAd,uBAAwCgB,GAC3D,CAAEvD,UAASwD,WAHE,cAEXlC,EAFW,yBAKVA,EAASD,MALC,wHAAH,0DAWTT,EAAqB,uCAAG,WAAO2C,GAAP,eAAAhD,EAAA,+EAENqC,IAAMQ,IAAN,UAAab,EAAb,uBAAuCgB,IAFjC,cAEvBjC,EAFuB,yBAGtBA,EAASD,MAHa,wHAAH,sDAkBrBsC,EAAO,uCAAG,WAAOH,EAAQF,EAAMH,GAArB,eAAA5C,EAAA,+EAEQqC,IAAMQ,IAAN,UAAab,EAAb,sBAAsCiB,GAAU,CACnEH,OAAQ,CAAEC,KAAMA,EAAMH,MAAOA,KAHlB,cAET7B,EAFS,yBAKRA,EAASD,MALD,sCAOT,IAAIyB,MAAM,KAAIxB,SAASD,KAAK0B,OAPnB,yDAAH,0DAWPa,EAAc,uCAAG,WAAOC,GAAP,eAAAtD,EAAA,+EAECqC,IAAMkB,OAAN,UAAgBvB,EAAhB,mBAAsCsB,IAFvC,cAEhBvC,EAFgB,yBAGfA,EAASD,MAHM,yDAKf,KAAIC,SAASD,KAAK0B,OALH,yDAAH,uD,0FClHZ,SAASgB,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAAO,OAAAG,EAAA,GAAiBH,GDGzC,CAAkBA,IELZ,SAA0BI,GACvC,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAYC,OAAOH,GAAO,OAAOH,MAAMO,KAAKJ,GFIvD,CAAgBJ,IAAQ,OAAAS,EAAA,GAA2BT,IGLvE,WACb,MAAM,IAAIU,UAAU,wIHIwE","file":"static/js/13.1c8509ba.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { addReview, getReviewByMaterialId } from '../../services/postServices';\r\nimport * as ROUTES from '../../constants/routes';\r\nimport LoggedInUserContext from '../../context/logged-in-user';\r\nimport { buyMaterialById, getMaterialByTitle } from '../../services/postServices';\r\n\r\nexport default function Material() {\r\n    const { user: loggedInUser } = useContext(LoggedInUserContext);\r\n    const { title } = useParams();\r\n    const [material, setMaterial] = useState()\r\n    const [reviews, setReviews] = useState([])\r\n    const [message, setMessage] = useState(\"\")\r\n    const [show, setShow] = useState(false)\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n\r\n        async function checkMaterialExists() {\r\n            const material = await getMaterialByTitle(title);\r\n            console.log(material?._id);\r\n            const reviews = await getReviewByMaterialId(material?._id)\r\n            console.log(reviews);\r\n            if (material?._id) {\r\n                setMaterial({ ...material });\r\n                setReviews(prevreview => [...prevreview, ...reviews])\r\n\r\n            } else {\r\n                history.push(ROUTES.NOT_FOUND);\r\n            }\r\n        }\r\n        checkMaterialExists();\r\n    }, [title, history]);\r\n\r\n    const handleBuy = async () => {\r\n        try {\r\n            const { data } = await buyMaterialById(material._id, loggedInUser._id, loggedInUser.username, material.author)\r\n            history.push(ROUTES.PURSMATERIAL);\r\n        } catch (error) {\r\n            console.log(error.response);\r\n        }\r\n    }\r\n\r\n    const showReview = () => {\r\n        setShow(!show)\r\n    }\r\n\r\n    const handleReview = (e) => {\r\n        setMessage(e.target.value)\r\n    }\r\n\r\n    const reviewSubmit = async () => {\r\n        try {\r\n            const data = await addReview(message, loggedInUser._id, material._id)\r\n            console.log(data);\r\n            setReviews(prevreview => [...prevreview, data])\r\n            setMessage(\"\")\r\n            setShow(false)\r\n            // history.push(ROUTES.PURSMATERIAL);\r\n        } catch (error) {\r\n            console.log(error.response);\r\n        }\r\n    }\r\n    console.log(reviews);\r\n    return (\r\n        <div>\r\n            {material && <div className=\"material\">\r\n                <div className=\"material__head\">\r\n                    <div className=\"material__title\">\r\n                        <h2 className=\"heading-primary\">{material.title}</h2>\r\n                        <h3 className=\"material__author\">By <span>{material.author}</span></h3>\r\n                    </div>\r\n                    <div className=\"material__price-box\">\r\n                        <h5 className=\"heading-black\">â‚¹ {material.paid.price}</h5>\r\n                        <button className=\"btn btn--grey\" onClick={handleBuy}>Buy</button>\r\n                    </div>\r\n                </div>\r\n                <p className=\"material__discription\">\r\n                    <h4 className=\"heading-black\">Disciption</h4>\r\n                    {material.caption}\r\n                </p>\r\n                <p className=\"material__review\">\r\n                    <div className=\"material__review-head\">\r\n                        <h4 className=\"heading-black\">Reviews</h4>\r\n                        <div className=\"material__review__box\">\r\n                            <button className=\"btn btn--grey\" onClick={showReview}>write your review</button>\r\n                            {show && <><input type=\"text\" placeholder=\"Review\" className=\"login__form--input\" onChange={handleReview} />\r\n                                <button className=\"btn btn--grey\" onClick={reviewSubmit}>Submit</button>\r\n                            </>}\r\n                        </div>\r\n                    </div>\r\n                    {reviews && <div>\r\n                        {reviews.map(review => {\r\n                            return (\r\n                                <>\r\n                                    <div className=\"material__review__box\">\r\n                                        <p>{review.message}</p>\r\n                                        <span>{review.date}</span>\r\n                                    </div>\r\n                                </>\r\n                            )\r\n                        })}\r\n                    </div>}\r\n                </p>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios';\r\nimport { apiUrl } from \"../config.json\";\r\n\r\nconst apiEndpoint = apiUrl + \"/post\";\r\n\r\nexport const postByUsername = async (files, title, caption, username, paid, price, progress) => {\r\n    try {\r\n        const { data } = await axios.post(`${apiEndpoint}/${username}`,\r\n            { files, title, caption, paid, price }, progress);\r\n        return { data };\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const retrivePostByUsername = async (username) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/${username}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const getUserMaterialByUsername = async (username, logginUserId, pageNumber, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/user-material/${username}`,\r\n            {\r\n                params: { page: pageNumber, limit: limit, logginUserId: logginUserId }\r\n            });\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\nexport const getMaterialByTitle = async (title) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/title/${title}`\r\n        );\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const buyMaterialById = async (materialId, userId, username, author) => {\r\n    try {\r\n        const response = await axios.post(`${apiEndpoint}/buy-material/${materialId}`,\r\n            {\r\n                username, author, userId\r\n            })\r\n        return response.data\r\n    } catch (error) {\r\n        return error;\r\n    }\r\n}\r\n\r\nexport const getUserPurcMaterialByUserId = async (userId) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/get-purc-material/${userId}`)\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\n\r\nexport const getUserPhotosByUsername = async (username, logginUserId, pageNumber, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/user-posts/${username}`,\r\n            {\r\n                params: { page: pageNumber, limit: limit, logginUserId: logginUserId }\r\n            });\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n};\r\n\r\nexport const addReview = async (message, userId, materialId) => {\r\n    try {\r\n        const response = await axios.post(`${apiEndpoint}/add-review/${materialId}`,\r\n            { message, userId }\r\n        );\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const getReviewByMaterialId = async (materialId) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/get-review/${materialId}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        return err;\r\n    }\r\n}\r\n\r\nexport const retrivePostByUserId = async (userId) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/userId/${userId}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const getPost = async (userId, page, limit) => {\r\n    try {\r\n        const response = await axios.get(`${apiEndpoint}/all-posts/${userId}`, {\r\n            params: { page: page, limit: limit }\r\n        });\r\n        return response.data;\r\n    } catch (err) {\r\n        throw new Error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const deletePostById = async (postId) => {\r\n    try {\r\n        const response = await axios.delete(`${apiEndpoint}/delete/${postId}`);\r\n        return response.data;\r\n    } catch (err) {\r\n        return err.response.data.error;\r\n    }\r\n};","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}