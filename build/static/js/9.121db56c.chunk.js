(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[9],{100:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(5),a=n.n(r),c=n(98),s=n(10),o=n(24),u=n(0),i=n(95);function l(t,e){var n=Object(u.useState)(!0),r=Object(o.a)(n,2),l=r[0],p=r[1],f=Object(u.useState)(!1),b=Object(o.a)(f,2),d=b[0],j=b[1],v=Object(u.useState)([]),O=Object(o.a)(v,2),h=O[0],w=O[1],x=Object(u.useState)(!1),m=Object(o.a)(x,2),g=m[0],y=m[1];return Object(u.useEffect)(Object(s.a)(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=function(){return(o=Object(s.a)(a.a.mark((function n(){var r,s,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===t||void 0===t||null===(r=t.following)||void 0===r?void 0:r.length)>0)){n.next=15;break}return n.prev=1,n.next=4,Object(i.b)(t._id,e,5);case 4:s=n.sent,o=s.results.sort((function(t,e){var n=new Date(t.date);return new Date(e.date)-n})),w((function(t){return[].concat(Object(c.a)(t),Object(c.a)(o))})),y(s.results.length>0),p(!1),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),j(!0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))).apply(this,arguments)},r=function(){return o.apply(this,arguments)},p(!0),j(!1),r();case 5:case"end":return n.stop()}}),n)}))),[null===t||void 0===t?void 0:t.userId,null===t||void 0===t?void 0:t.following,e]),{posts:h,loading:l,error:d,hasMore:g,setPosts:w}}},119:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n(5),a=n.n(r),c=n(10),s=n(98),o=n(24),u=n(0),i=n(2),l=n(94),p=n(93),f=n(3);function b(t){var e=t.files,n=t.onChange;return e.length?Object(f.jsx)("div",{className:"file-privew",children:e.map((function(t){return Object(f.jsxs)("div",{className:"file-privew__item",children:[Object(f.jsx)(p.a,{icon:l.u,className:"file-privew__close",onClick:function(){return function(t){n(t)}(t)}}),Object(f.jsx)("img",{src:t})]})}))}):null}var d=n(99),j=n(100),v=n(13),O=n(95);function h(){var t=Object(u.useContext)(d.a).user,e=Object(j.a)().setPosts,n=Object(u.useState)(),r=Object(o.a)(n,2),h=(r[0],r[1],Object(u.useState)([])),w=Object(o.a)(h,2),x=w[0],m=w[1],g=Object(u.useState)([]),y=Object(o.a)(g,2),k=y[0],_=y[1],S=Object(u.useState)(""),N=Object(o.a)(S,2),C=N[0],E=N[1],P=Object(u.useState)(),A=Object(o.a)(P,2),R=(A[0],A[1],Object(i.g)()),U={onUploadProgress:function(t){var e=Math.round(t.loaded/t.total*100)+"%";console.log(e)}},D=function(){var n=Object(c.a)(a.a.mark((function n(){var r,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(O.d)(k,C,t.username,U);case 3:r=n.sent,c=r.data,e(c),R.push(v.a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"newpost__head",children:[Object(f.jsx)("h3",{className:"heading-tertiary",children:"New Post"}),Object(f.jsx)("button",{className:"btn btn--grey",onClick:D,children:"Post"})]}),Object(f.jsxs)("div",{className:"newpost__main",children:[Object(f.jsx)("div",{children:Object(f.jsx)(b,{files:x,onChange:function(t){m(x.filter((function(e){return e!=t})));var e=x.indexOf(t);_(k.splice(e,1))}})}),Object(f.jsx)("textarea",{className:"newpost__input-text",placeholder:"compose new post...",onChange:function(t){E(t.target.value)}}),Object(f.jsxs)("label",{className:"newpost__media",children:[Object(f.jsx)(p.a,{icon:l.k}),Object(f.jsx)("input",{type:"file",style:{opacity:0,position:"absolute",left:"-99999px"},onChange:function(t){if(t.target.files.length){m((function(e){return[].concat(Object(s.a)(e),[URL.createObjectURL(t.target.files[0])])}));var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=function(){var t=e.result;_((function(e){return[].concat(Object(s.a)(e),[t])}))}}}})]})]})]})}},95:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return b}));var r=n(5),a=n.n(r),c=n(10),s=n(11),o=n.n(s),u=n(18),i=u.a+"/post",l=function(){var t=Object(c.a)(a.a.mark((function t(e,n,r,c){var s,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("".concat(i,"/").concat(r),{files:e,caption:n},c);case 3:return s=t.sent,u=s.data,t.abrupt("return",{data:u});case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0.response.data.error);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(i,"/user-posts/").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(c.a)(a.a.mark((function t(e,n,r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(i,"/all-posts/").concat(e),{params:{page:n,limit:r}});case 3:return c=t.sent,t.abrupt("return",c.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.delete("".concat(i,"/delete/").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},98:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(21);var a=n(27);function c(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(a.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=9.121db56c.chunk.js.map