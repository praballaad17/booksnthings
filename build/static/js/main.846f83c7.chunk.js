(this.webpackJsonpbooknthings=this.webpackJsonpbooknthings||[]).push([[2],{13:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"k",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"j",(function(){return b})),n.d(e,"i",(function(){return d}));var r="/",a="/login",c="/sign-up",o="/material/:title",u="/not-found",s="/newpost",i="/bookshell",l="/bookshell/mymaterial",f="/bookshell/pursmaterial",b="/search-result",d="/request-your-book"},17:function(t,e,n){"use strict";var r=n(0),a=Object(r.createContext)(null);e.a=a},18:function(t){t.exports=JSON.parse('{"a":"https://booknthingsserver.herokuapp.com/api"}')},26:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return j})),n.d(e,"a",(function(){return O}));var r,a=n(5),c=n.n(a),o=n(14),u=n(10),s=n(11),i=n.n(s),l=n(18),f=n(15),b=l.a+"/auth",d="token";r=localStorage.getItem(d),i.a.defaults.headers.common["x-auth-token"]=r;var p=function(){var t=Object(u.a)(c.a.mark((function t(e,n,r){var a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e&&n?{data:{usernameOrEmail:e,password:n}}:{headers:{authorization:r}},t.next=4,i()("".concat(b,"/login"),Object(o.a)({method:"POST"},a));case 4:return u=t.sent,localStorage.setItem(d,u.data.token),t.abrupt("return",u.data);case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n,r){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(c.a.mark((function t(e,n,r,a){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("".concat(b,"/register"),{email:r,fullName:n,username:e,password:a});case 3:return o=t.sent,localStorage.setItem(d,o.data.token),t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0.response.data.error);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}();function j(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem(d);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){try{var t=localStorage.getItem(d);return Object(f.a)(t)}catch(e){return null}}},89:function(t,e,n){},90:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(25),o=n.n(c),u=n(16),s=n(2),i=n(36),l=n.n(i),f=n(3);function b(){return Object(f.jsx)(l.a,{type:"TailSpin",color:"#00000059",height:70,width:70,className:"flex justify-center mt-12"})}var d=n(13),p=n(17),h=n(24),j=n(15);var m=n(14),O=n(38),v=n(26),x=["children"];function k(t){var e=t.children,n=Object(O.a)(t,x),r=Object(v.a)();return Object(f.jsx)(s.b,Object(m.a)(Object(m.a)({},n),{},{render:function(t){var n=t.location;return r?a.a.cloneElement(e,{user:r}):r?null:Object(f.jsx)(s.a,{to:{pathname:d.c,state:{from:n}}})}}))}var g=Object(r.lazy)((function(){return n.e(16).then(n.bind(null,159))})),w=Object(r.lazy)((function(){return n.e(17).then(n.bind(null,160))})),y=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(10)]).then(n.bind(null,161))})),S=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(11)]).then(n.bind(null,162))}));function I(){var t=function(){var t=Object(r.useState)(),e=Object(h.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){try{var t=localStorage.getItem("token");a(Object(j.a)(t))}catch(e){a(null)}}),[]),n}();return console.log(t),Object(f.jsx)(p.a.Provider,{value:{user:t},children:Object(f.jsx)(u.a,{children:Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)(b,{}),children:Object(f.jsxs)(s.d,{children:[Object(f.jsx)(s.b,{path:d.c,component:g}),Object(f.jsx)(s.b,{path:d.k,component:w}),Object(f.jsx)(k,{user:t,path:d.b,children:Object(f.jsx)(y,{})}),Object(f.jsx)(s.b,{component:S})]})})})})}n(89),n(90);o.a.render(Object(f.jsx)(I,{}),document.getElementById("root"))}},[[91,3,4]]]);
//# sourceMappingURL=main.846f83c7.chunk.js.map