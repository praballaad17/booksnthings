(this.webpackJsonpbooknthings=this.webpackJsonpbooknthings||[]).push([[9],{100:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return c}));var a="/images/avatars/default.png",c="/loading.svg"},112:function(e,t,s){"use strict";s.d(t,"a",(function(){return N}));var a=s(5),c=s.n(a),n=s(10),l=s(24),i=s(0),r=s(13),o=s(2),b=s(16),j=s(94),d=s(96),u=s(18),O=s(99),h=s(25),x=s(26),g=s.n(x),m=s(3);function p(e){var t=e.show,s=e.onClose,a=e.user,c=e.loggedInUser;return t?g.a.createPortal(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"togglebar-overlay",onClick:s}),Object(m.jsxs)("div",{className:"toggle-sidebar",children:[Object(m.jsx)("div",{className:"toggle-sidebar__close",onClick:s,children:Object(m.jsx)(d.a,{icon:j.k})}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:"/user/".concat(null===a||void 0===a?void 0:a.username),"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.m})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Profile"})]})}),c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.b})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Bookmarks"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.g})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"List"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.c})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Settings"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.e})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Your Cards"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.l})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Add Bank"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",onClick:function(){Object(h.c)(),window.location=r.c},onKeyDown:function(e){"Enter"===e.key&&(Object(h.c)(),window.location=r.c)},children:Object(m.jsxs)("div",{className:"toggle-sidebar__link",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.j})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Log Out"})]})})]}):Object(m.jsx)("li",{className:"link-list-item link-list-item--newpost",children:Object(m.jsxs)(b.b,{className:"link",to:r.c,"aria-label":"Newpost",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.j})}),Object(m.jsx)("span",{className:"link--text",children:"Log In"})]})}),"                    "]})]})]}),document.getElementById("togglebar")):null}var _=s(98),k=s(100);function N(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),s=t[0],a=t[1],x=Object(i.useState)(),g=Object(l.a)(x,2),N=(g[0],g[1]),f=Object(i.useContext)(u.a).user,v=Object(O.a)(null===f||void 0===f?void 0:f.username).user;Object(o.g)();return Object(i.useEffect)(Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.b)(null===v||void 0===v?void 0:v.username).then((function(e){!e.displayImg||e.displayImg.profileImg.length?N(e.displayImg.profileImg):N(k.a)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[v]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"leftbar__toglebar",children:Object(m.jsx)(p,{show:s,user:v,loggedInUser:f,onClose:function(){return a(!1)}})}),Object(m.jsx)("div",{className:"leftbar",children:Object(m.jsxs)("ul",{className:"link-list",children:[Object(m.jsx)("li",{className:"link-list-item",children:Object(m.jsx)(b.b,{className:"u-center-text heading-logo",to:r.b,"aria-label":"LOGO",children:"Book'n'things"})}),Object(m.jsx)("li",{className:"link-list-item",children:Object(m.jsxs)(b.b,{className:"link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.d})}),Object(m.jsx)("span",{className:"link--text",children:"My Library"})]})}),f&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"link-list-item",children:Object(m.jsxs)(b.b,{className:"link",to:r.i,"aria-label":"Bookshell",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.a})}),Object(m.jsx)("span",{className:"link--text",children:"Request Your Book"})]})}),Object(m.jsx)("li",{className:"link-list-item",children:Object(m.jsxs)(b.b,{className:"link",to:r.a,"aria-label":"Bookshell",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.c})}),Object(m.jsx)("span",{className:"link--text",children:"Settings"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.e})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Your Cards"})]})}),Object(m.jsx)("li",{className:"toggle-sidebar__item",children:Object(m.jsxs)(b.b,{className:"toggle-sidebar__link",to:r.b,"aria-label":"Dashboard",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.l})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Add Bank"})]})})]}),f?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"toggle-sidebar__item",onClick:function(){Object(h.c)(),window.location=r.c},onKeyDown:function(e){"Enter"===e.key&&(Object(h.c)(),window.location=r.c)},children:Object(m.jsxs)("div",{className:"toggle-sidebar__link",children:[Object(m.jsx)("span",{className:"toggle-sidebar__link--icon",children:Object(m.jsx)(d.a,{icon:j.j})}),Object(m.jsx)("span",{className:"toggle-sidebar__link--text",children:"Log Out"})]})}),Object(m.jsx)("li",{className:"link-list-item link-list-item--newpost",children:Object(m.jsxs)(b.b,{className:"link",to:r.f,"aria-label":"Newpost",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.h})}),Object(m.jsx)("span",{className:"link--text",children:"New Post"})]})})]}):Object(m.jsx)("li",{className:"link-list-item link-list-item--newpost",children:Object(m.jsxs)(b.b,{className:"link",to:r.c,"aria-label":"Newpost",children:[Object(m.jsx)("span",{className:"link--icon",children:Object(m.jsx)(d.a,{icon:j.j})}),Object(m.jsx)("span",{className:"link--text",children:"Log In"})]})})]})})]})}},159:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return v}));var a=s(24),c=s(0),n=s(2),l=s(13),i=s(99),r=s(95),o=s(112),b=s(94),j=s(96),d=s(100),u=s(11),O=s.n(u),h=s(17);var x=s(3);function g(){var e=Object(n.g)(),t=Object(c.useState)(),s=Object(a.a)(t,2),l=s[0],i=s[1],o=Object(c.useContext)(r.a),u=(o.searchResult,o.setSearchResult),g=Object(c.useState)(1),m=Object(a.a)(g,2),p=m[0],_=m[1],k=function(e,t){var s=Object(c.useState)(!0),n=Object(a.a)(s,2),l=n[0],i=n[1],r=Object(c.useState)(!1),o=Object(a.a)(r,2),b=o[0],j=o[1],d=Object(c.useState)([]),u=Object(a.a)(d,2),x=u[0],g=u[1],m=Object(c.useState)(!1),p=Object(a.a)(m,2),_=p[0],k=p[1],N=h.a+"/post";return Object(c.useEffect)((function(){g([])}),[e]),Object(c.useEffect)((function(){var s;return i(!0),j(!1),O()({method:"GET",url:"".concat(N,"/search/").concat(e),params:{page:t,limit:5},cancelToken:new O.a.CancelToken((function(e){return s=e}))}).then((function(e){console.log(e),k(e.data.length>0),i(!1),g(e.data)})).catch((function(e){O.a.isCancel(e)||(j(!0),i(!1),console.log(e))})),function(){return s()}}),[e,t]),{result:x,loading:l,error:b,hasMore:_}}(l,p),N=k.result,f=(k.hasMore,k.loading);k.error;Object(c.useEffect)((function(){f||u(N),l||u([])}),[N,f]);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"search-box",children:[Object(x.jsx)("input",{id:"input",className:"search__input",onChange:function(t){i(t.target.value),_(1),e.push("/search-result")},placeholder:"Search Users"}),!l&&Object(x.jsx)("div",{className:"search__icon",children:Object(x.jsx)(j.a,{icon:b.i})}),l&&!f&&Object(x.jsx)(j.a,{onClick:function(){i(""),document.getElementById("input").value=""},icon:b.k}),f&&Object(x.jsx)("img",{className:"search__loading",src:d.b})]})})}var m=s(27),p=Object(c.lazy)((function(){return s.e(14).then(s.bind(null,154))})),_=Object(c.lazy)((function(){return Promise.all([s.e(1),s.e(12)]).then(s.bind(null,155))})),k=Object(c.lazy)((function(){return s.e(13).then(s.bind(null,156))})),N=Object(c.lazy)((function(){return Promise.all([s.e(0),s.e(6)]).then(s.bind(null,160))})),f=Object(c.lazy)((function(){return s.e(11).then(s.bind(null,161))}));function v(e){var t=e.user,s=Object(c.useState)(!1),b=Object(a.a)(s,2),j=(b[0],b[1],Object(c.useState)([])),d=Object(a.a)(j,2),u=d[0],O=d[1],h=(t&&t.id,t?t.username:null),v=Object(i.a)(h),w=v.user,y=v.setActiveUser,S=Object(n.j)(),C=S.path,I=S.url;return Object(c.useEffect)((function(){document.title="Book'N'Things"}),[]),Object(x.jsx)(r.a.Provider,{value:{user:w,setActiveUser:y,searchResult:u,setSearchResult:O},children:Object(x.jsxs)("div",{className:"dashboard",children:[Object(x.jsx)("div",{className:"dashboard__leftbar",children:Object(x.jsx)(o.a,{path:C,url:I})}),Object(x.jsxs)("div",{className:"dashboard__main",children:[Object(x.jsx)("div",{className:"dashboard__searchbar",children:Object(x.jsx)(g,{searchResult:u,setSearchResult:O})}),Object(x.jsx)(c.Suspense,{fallback:Object(x.jsx)(m.a,{}),children:Object(x.jsxs)(n.d,{children:[Object(x.jsx)(n.a,{exact:!0,from:l.b,to:l.a}),Object(x.jsx)(n.b,{path:l.a,component:f}),Object(x.jsx)(n.b,{path:l.i,component:p}),Object(x.jsx)(n.b,{path:l.f,component:N}),Object(x.jsx)(n.b,{path:l.j,component:k}),Object(x.jsx)(n.b,{path:l.d,component:_})]})})]})]})})}},95:function(e,t,s){"use strict";var a=s(0),c=Object(a.createContext)(null);t.a=c},98:function(e,t,s){"use strict";s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return j}));var a=s(5),c=s.n(a),n=s(10),l=s(11),i=s.n(l),r=s(17),o=(s(15),r.a+"/user"),b=function(){var e=Object(n.a)(c.a.mark((function e(t){var s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(o,"/username/").concat(t));case 3:return s=e.sent,e.abrupt("return",s.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(null===(a=e.t0.response)||void 0===a?void 0:a.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(c.a.mark((function e(t){var s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(o,"/display-imgs/").concat(t));case 3:return s=e.sent,e.abrupt("return",s.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(null===(a=e.t0.response)||void 0===a?void 0:a.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},99:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var a=s(5),c=s.n(a),n=s(14),l=s(10),i=s(24),r=s(0),o=s(98);function b(e){var t=Object(r.useState)(),s=Object(i.a)(t,2),a=s[0],b=s[1];return Object(r.useEffect)((function(){function t(){return(t=Object(l.a)(c.a.mark((function e(t){var s,a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(t);case 2:return s=e.sent,e.next=5,Object(o.b)(t);case 5:a=e.sent,l=a.displayImg,b(Object(n.a)(Object(n.a)({},s),{},{displayImg:l})||{});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&function(e){t.apply(this,arguments)}(e)}),[e]),{user:a,setActiveUser:b}}}}]);
//# sourceMappingURL=9.e67f13c9.chunk.js.map