(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[2],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(5),r=n.n(c),a=n(98),s=n(10),o=n(24),l=n(0),i=n(95);function u(e,t){var n=Object(l.useState)(!0),c=Object(o.a)(n,2),u=c[0],d=c[1],j=Object(l.useState)(!1),b=Object(o.a)(j,2),f=b[0],m=b[1],p=Object(l.useState)([]),h=Object(o.a)(p,2),O=h[0],x=h[1],v=Object(l.useState)(!1),g=Object(o.a)(v,2),w=g[0],_=g[1];return Object(l.useEffect)(Object(s.a)(r.a.mark((function n(){var c,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=function(){return(o=Object(s.a)(r.a.mark((function n(){var c,s,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===e||void 0===e||null===(c=e.following)||void 0===c?void 0:c.length)>0)){n.next=15;break}return n.prev=1,n.next=4,Object(i.b)(e._id,t,5);case 4:s=n.sent,o=s.results.sort((function(e,t){var n=new Date(e.date);return new Date(t.date)-n})),x((function(e){return[].concat(Object(a.a)(e),Object(a.a)(o))})),_(s.results.length>0),d(!1),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),m(!0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))).apply(this,arguments)},c=function(){return o.apply(this,arguments)},d(!0),m(!1),c();case 5:case"end":return n.stop()}}),n)}))),[null===e||void 0===e?void 0:e.userId,null===e||void 0===e?void 0:e.following,t]),{posts:O,loading:u,error:f,hasMore:w,setPosts:x}}},101:function(e,t,n){"use strict";var c=n(0),r=Object(c.createContext)(null);t.a=r},105:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var c=n(5),r=n.n(c),a=n(10),s=n(24),o=n(0),l=n(94),i=n(93),u=n(16),d=n(96),j=n(95),b=n(98),f=n(25),m=n.n(f),p=n(2),h=n(99),O=(n(100),n(13),n(101)),x=n(3);function v(e){var t=e.open,n=e.content,c=e.onClose,l=(e.setProfile,e.photosCollection),i=Object(o.useState)(),d=Object(s.a)(i,2),f=(d[0],d[1],Object(o.useContext)(h.a).user),v=Object(o.useContext)(O.a),g=v.posts,w=v.setPosts,_=Object(p.h)().pathname;if(!t)return null;var N=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createPortal(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"modal-layout",onClick:c}),Object(x.jsx)("div",{className:"modal-box",children:Object(x.jsxs)("ul",{className:"modal-box__list",children:[Object(x.jsx)("li",{className:"modal-box__item",children:Object(x.jsx)(u.b,{target:"_blanck",to:"/user/".concat(null===n||void 0===n?void 0:n.author),children:"Share"})}),n.author!=f.username&&Object(x.jsx)("li",{className:"modal-box__item u-text-red-bold",onClick:N,children:"Unfollow"}),n.author==f.username&&Object(x.jsx)("li",{className:"modal-box__item u-text-red-bold",onClick:function(){w("/"==_?g.filter((function(e){return e._id!=n._id})):{photosCollection:l.filter((function(e){return e._id!=n._id}))}),Object(j.a)(n._id).then((function(){})).catch((function(e){alert("Error while deleting the Post, generally check your internet"),console.log(e,n),w("/"==_?function(e){return[].concat(Object(b.a)(e),[n])}:{photosCollection:l.push(n)})}))},children:"Delete Post"}),n.author!=f.username&&Object(x.jsx)("li",{className:"modal-box__item u-text-red-bold",onClick:function(){localStorage.setItem("dontLikePost",JSON.stringify({postId:n._id,author:n.author})),w(g.filter((function(e){return e._id!=n._id}))),c()},children:"I don't link this Post"}),Object(x.jsx)("li",{className:"modal-box__item",onClick:c,children:"Cancel"})]})})]}),document.getElementById("modal"))}function g(e){var t=e.username,n=e.profileImg,c=e.content,r=e.setProfile,a=e.photosCollection,j=Object(o.useState)(!1),b=Object(s.a)(j,2),f=b[0],m=b[1];return Object(x.jsxs)("div",{className:"post__header",children:[Object(x.jsxs)(u.b,{to:"/user/".concat(t),className:"flex items-center",children:[Object(x.jsx)("img",{className:"post__header--img",src:n||d.a,alt:"".concat(t," profile picture")}),Object(x.jsx)("p",{className:"font-bold",children:t})]}),Object(x.jsx)("div",{onClick:function(){return m(!0)},children:Object(x.jsx)(i.a,{icon:l.h})}),Object(x.jsx)(v,{content:c,open:f,onClose:function(){return m(!1)},setProfile:r,photosCollection:a})]})}function w(e){var t=e.files,n=e.caption,c=Object(o.useState)(0),r=Object(s.a)(c,2),a=r[0],u=r[1];return Object(x.jsx)("div",{className:"image-slider",children:Object(x.jsxs)("div",{className:"image-slider__box",children:[Object(x.jsx)("img",{src:t[a],alt:n}),Object(x.jsx)(x.Fragment,{children:a<t.length-1&&Object(x.jsx)("button",{className:"image-slider__btn image-slider__btn-inc",onClick:function(){if(a==t.length-1)return null;u(a+1)},children:Object(x.jsx)(i.a,{icon:l.b})})}),0!==a&&Object(x.jsx)("button",{className:"image-slider__btn image-slider__btn-dec",onClick:function(){if(0==a)return null;u(a-1)},children:Object(x.jsx)(i.a,{icon:l.a})})]})})}n(17);function _(e){var t=e.caption,n=e.username,c=Object(o.useState)(""),r=Object(s.a)(c,2),a=r[0],l=r[1];return Object(o.useEffect)((function(){l(t.replace("\n","\r"))}),[t]),Object(x.jsxs)("div",{className:"post__footer",children:[Object(x.jsx)("span",{className:"post__footer--name",children:n}),Object(x.jsx)("span",{className:"post__footer--caption",children:a})]})}n(124);var N=n(92);function C(e){var t=e.content,n=e.postref,c=e.setProfile,l=e.photosCollection,i=(Object(o.useRef)(null),Object(o.useState)()),u=Object(s.a)(i,2),d=u[0],j=u[1],b=t.files,f=t.caption,m=t.author;return Object(o.useEffect)(Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(m);case 2:t=e.sent,n=t.displayImg,j(n.profileImg);case 5:case"end":return e.stop()}}),e)}))),[]),Object(x.jsxs)("div",{ref:n,className:"post",children:[Object(x.jsx)(g,{content:t,username:t.author,profileImg:d,setProfile:c,photosCollection:l}),Object(x.jsx)(w,{files:b,caption:t.author}),Object(x.jsx)(_,{caption:f,username:m})]})}},118:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var c=n(5),r=n.n(c),a=n(14),s=n(10),o=n(24),l=n(2),i=n(0),u=n(92),d=n(13),j=(n(16),n(17)),b=n(96),f=n(97),m=n(3);var p=n(104),h=n.n(p),O=n(25),x=n.n(O);function v(e){var t=e.open,n=e.user,c=e.onClose,a=(e.setProfile,Object(i.useState)()),l=Object(o.a)(a,2);l[0],l[1];if(!t)return null;var d=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.e)(n.username);case 3:window.location="/user/".concat(n.username),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return x.a.createPortal(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"modal-layout",onClick:c}),Object(m.jsxs)("div",{className:"modal-box",children:[Object(m.jsx)("div",{className:"modal-box__heading heading-black",children:"Change Profile Photo"}),Object(m.jsxs)("ul",{className:"modal-box__list",children:[Object(m.jsx)("label",{className:"newpost__media",children:Object(m.jsxs)("li",{className:"modal-box__item",children:["Upload Image",Object(m.jsx)("input",{type:"file",style:{opacity:0,position:"absolute",left:"-99999px"},onChange:function(e){if(e.target.files.length){var t=new FileReader;t.readAsDataURL(e.target.files[0]),console.log(e.target.files[0]),t.onload=Object(s.a)(r.a.mark((function e(){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.result,e.prev=1,e.next=4,Object(u.g)(n.username,c);case 4:a=e.sent,console.log(a),window.location="/user/".concat(n.username),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))}}})]})}),Object(m.jsx)("li",{className:"modal-box__item",onClick:d,children:"Remove Image"}),Object(m.jsx)("li",{className:"modal-box__item",onClick:c,children:"Cencel"})]})]})]}),document.getElementById("modal"))}function g(e){var t=e.open,n=e.user,c=e.onClose,r=Object(i.useState)(),a=Object(o.a)(r,2);a[0],a[1];if(!t)return null;console.log(n);return x.a.createPortal(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"modal-layout",onClick:c}),Object(m.jsxs)("div",{className:"modal-box",children:[Object(m.jsx)("div",{className:"modal-box__heading heading-black",children:"Followers"}),Object(m.jsxs)("ul",{className:"modal-box__list",children:[n.followers.map((function(e){})),Object(m.jsx)("li",{className:"modal-box__item",onClick:c,children:"Cencel"})]})]})]}),document.getElementById("modal"))}function w(e){var t=e.photosCount,n=e.followerCount,c=e.setProfile,a=e.displayImgs,l=e.profile,d=l._id,p=l.fullName,O=l.followers,x=l.following,w=l.username,_=Object(i.useContext)(j.a).user,N=Object(f.a)(null===_||void 0===_?void 0:_.username).user,C=Object(i.useState)(null),k=Object(o.a)(C,2),y=k[0],P=k[1],I=Object(i.useState)(!1),S=Object(o.a)(I,2),E=S[0],F=S[1],D=Object(i.useState)(!1),R=Object(o.a)(D,2),U=R[0],B=R[1],J=Object(i.useState)(!1),L=Object(o.a)(J,2),A=(L[0],L[1]),H=(null===N||void 0===N?void 0:N.username)&&(null===N||void 0===N?void 0:N.username)!==w,K=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P((function(e){return!e})),c({followerCount:y?n-1:n+1}),e.next=4,Object(u.f)(y,d,N._id);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){(null===N||void 0===N?void 0:N.username)&&d&&function(){var e=O.filter((function(e){return e._id==N._id}));P(!!e.length)}()}),[null===N||void 0===N?void 0:N.username,d]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[Object(m.jsx)("div",{className:"container flex justify-center items-center",children:w?Object(m.jsx)("img",{onClick:function(){return F(!0)},className:"rounded-full h-40 w-40 flex",alt:"".concat(p," profile picture"),src:a?a.profileImg:b.a,onError:function(e){e.target.src=b.a}}):Object(m.jsx)(h.a,{circle:!0,height:150,width:150,count:1})}),Object(m.jsx)(v,{setProfile:c,open:E,user:N,onClose:function(){return F(!1)}}),Object(m.jsxs)("div",{className:"flex items-center justify-center flex-col col-span-2",children:[Object(m.jsxs)("div",{className:"container flex items-center",children:[Object(m.jsx)("p",{className:"text-2xl mr-4",children:w}),H&&null===y?Object(m.jsx)(h.a,{count:1,width:60,height:32}):H&&Object(m.jsx)("button",{className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",type:"button",onClick:K,onKeyDown:function(e){"Enter"===e.key&&K()},children:y?"Unfollow":"Follow"})]}),Object(m.jsx)("div",{className:"container flex mt-4",children:O&&x?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{className:"mr-10",children:[Object(m.jsx)("span",{className:"font-bold",children:t})," photos"]}),Object(m.jsxs)("p",{className:"mr-10",onClick:function(){return B(!0)},children:[Object(m.jsx)("span",{className:"font-bold",children:n})," ",1===n?"follower":"followers"]}),Object(m.jsx)(g,{open:U,user:N,onClose:function(){return B(!1)}}),Object(m.jsxs)("p",{className:"mr-10",onClick:function(){return A(!0)},children:[Object(m.jsx)("span",{className:"font-bold",children:null===x||void 0===x?void 0:x.length})," following"]})]}):Object(m.jsx)(h.a,{count:1,width:500,height:24})}),Object(m.jsx)("div",{className:"container mt-4",children:Object(m.jsx)("p",{className:"font-medium",children:p||Object(m.jsx)(h.a,{count:1,height:24})})})]})]})})}var _=n(105),N=n(95),C=n(101);function k(e){var t=e.user,n=Object(i.useReducer)((function(e,t){return Object(a.a)(Object(a.a)({},e),t)}),{profile:{},photosCollection:null,followerCount:0,displayImgs:{}}),c=Object(o.a)(n,2),l=c[0],j=l.profile,b=l.photosCollection,f=l.followerCount,p=l.displayImgs,O=c[1];return Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(r.a.mark((function e(){var n,c,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(t.username);case 2:return n=e.sent,c=n.sort((function(e,t){var n=new Date(e.date);return new Date(t.date)-n})),e.next=6,Object(u.b)(t.username);case 6:a=e.sent,s=a.displayImg,O({profile:t,photosCollection:c,followerCount:t.followers.length,displayImgs:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.username]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(C.a.Provider,{value:{user:t,posts:b,setPosts:O},children:[Object(m.jsx)(w,{photosCount:b?b.length:0,profile:j,followerCount:f,displayImgs:p,setProfile:O}),b?Object(m.jsxs)(m.Fragment,{children:[b.length?b.map((function(e){return Object(m.jsx)(_.a,{content:e,profileImg:p.profileImg,setProfile:O,photosCollection:b},e._id)})):Object(m.jsxs)("div",{className:"nopost",children:[Object(m.jsx)("div",{className:"nopost-no heading-main",children:"No Post"}),Object(m.jsxs)("div",{className:"nopost-to",children:[Object(m.jsx)("a",{href:d.d,children:"Click Here"})," To Post"]})]})," "]}):Object(m.jsx)(h.a,{count:4,width:640,height:500,className:"mb-5"})]})})}function y(){var e=Object(l.i)().username,t=Object(i.useState)(null),n=Object(o.a)(t,2),c=n[0],j=n[1],b=Object(l.g)();return Object(i.useEffect)((function(){function t(){return(t=Object(s.a)(r.a.mark((function t(){var n,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)(e);case 2:return n=t.sent,t.next=5,Object(u.c)(e);case 5:return c=t.sent,t.next=8,Object(u.d)(e);case 8:s=t.sent,(null===n||void 0===n?void 0:n._id)?j(Object(a.a)(Object(a.a)({},n),{},{followers:c,following:s})):b.push(d.e);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,b]),(null===c||void 0===c?void 0:c.username)?Object(m.jsx)("div",{className:"bg-gray-background",children:Object(m.jsx)("div",{className:"mx-auto max-w-screen-lg",children:Object(m.jsx)(k,{user:c})})}):null}},95:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return b}));var c=n(5),r=n.n(c),a=n(10),s=n(11),o=n.n(s),l=n(18),i=l.a+"/post",u=function(){var e=Object(a.a)(r.a.mark((function e(t,n,c,a){var s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("".concat(i,"/").concat(c),{files:t,caption:n},a);case 3:return s=e.sent,l=s.data,e.abrupt("return",{data:l});case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,c,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("".concat(i,"/user-posts/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(r.a.mark((function e(t,n,c){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("".concat(i,"/all-posts/").concat(t),{params:{page:n,limit:c}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,c){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("".concat(i,"/delete/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=2.4cac34f5.chunk.js.map